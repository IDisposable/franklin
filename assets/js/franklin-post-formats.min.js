!function n(i,s,l){function u(a,e){if(!s[a]){if(!i[a]){var t="function"==typeof require&&require;if(!e&&t)return t(a,!0);if(f)return f(a,!0);var o=new Error("Cannot find module '"+a+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[a]={exports:{}};i[a][0].call(r.exports,function(e){var t=i[a][1][e];return u(t||e)},r,r.exports,n,i,s,l)}return s[a].exports}for(var f="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,a){"use strict";e("./post-formats/media"),e("./post-formats/hide-boxes"),e("./post-formats/status"),e("./post-formats/gallery")},{"./post-formats/gallery":2,"./post-formats/hide-boxes":3,"./post-formats/media":4,"./post-formats/status":5}],2:[function(e,t,a){"use strict";function o(){document.querySelector(".gallery_remove").addEventListener("click",function(e){e.preventDefault();var t=e.target.closest(".postbox");t.querySelector(".post_format_value").value="",t.querySelector(".pfp-shortcode-holder").innerHTML=""},!1),document.querySelector("#post_format_gallery_add").addEventListener("click",function(e){e.preventDefault(),function(n){var e=n.querySelector(".post_format_value").value;if(e=e.split(","),wp.media.frames.galleryBox)return wp.media.frames.galleryBox.open();wp.media.frames.galleryBox=wp.media({title:"Gallery",library:{type:"image"},multiple:!0,toolbar:"main-gallery",state:"gallery-library",frame:"post"}),wp.media.frames.galleryBox.on("open",function(){var a=wp.media.frames.galleryBox.state().get("selection");e.forEach(function(e){var t=wp.media.attachment(e);t.fetch(),a.add(t?[t]:[])})}),wp.media.frames.galleryBox.on("update",function(){var a,e,t=wp.media.frames.galleryBox.state().get("library"),o="",r=[];t.map(function(e){r.push(e.id)}),o=r.join(","),n.querySelector(".post_format_value").value=o,a=n,e={action:"benjamin_postformat_shortcode",pfpSTR:'[gallery link="none" ids="'+o+'"]'},jQuery.ajax({type:"POST",url:ajaxurl,data:e,complete:function(e){if(200==e.status){var t=e.responseText;""==t?a.querySelector(".post_format_value").value="":a.querySelector(".pfp-shortcode-holder").innerHTML=t}}})}),wp.media.frames.galleryBox.open()}(e.target.closest(".postbox"))})}jQuery(document).ready(function(e){o()})},{}],3:[function(e,t,a){"use strict";function o(){var e=["aside","status","gallery","image","link","quote","audio","video","chat"];e=e.map(function(e){return"#post_formats_"+e}).join(", "),$(e).hide()}jQuery(document).ready(function(e){if(o(),$(".pfp-js-remove-link").on("click",function(e){e.preventDefault(),$(this).closest(".link-box").find("input").val("")}),!(e("#post-formats-select").length<=0)){var t=e("input[name='post_format']:checked").val(),a=["aside","status","gallery","image","link","quote","audio","video","chat"];"-1"!=e.inArray(t,a)&&e("#post_formats_"+t).show(),e("input[name='post_format']:radio").change(function(){o(),"-1"!=e.inArray(e(this).val(),a)&&e("#post_formats_"+e(this).val()).show()})}})},{}],4:[function(e,t,a){"use strict";jQuery(document).ready(function(n){n(".post_format_value").on("change",function(e){e.preventDefault();var t=n(this),a=t.closest(".postbox"),o=t.val(),r=t.data("media");window.pfpAJAXMarkup(o,r,a)}),n(".pfp-js-remove-media").on("click",function(e){e.preventDefault();var t=n(this).closest(".postbox");t.find(".pfp-media-holder").html(""),t.find(".post_format_url").val(""),t.find(".post_format_value").val("")}),n(".pfp-js-media-library").on("click",function(e){e.preventDefault();var t=n(this),a=t.data("media"),o=t.closest(".postbox");o.find(".post_format_value").val();wp.media.frames.mediaBox&&delete wp.media.frames.mediaBox,wp.media.frames.mediaBox=wp.media({title:a,button:{text:"Select "+a},library:{type:a},multiple:!1}),wp.media.frames.mediaBox.on("select",function(){media_attachment=wp.media.frames.mediaBox.state().get("selection").first().toJSON();var e;(e=a).charAt(0).toUpperCase(),e.slice(1);!function(e,t,a){pfpAJAXMarkup(e.url,t,a);console.log(e,t,a),a.find(".post_format_value").val(e.url)}(media_attachment,a,o)}),wp.media.frames.mediaBox.open()})}),window.pfpAJAXMarkup=function(e,t,a){var o={action:"benjamin_postformat_oembed",pfpURL:e,pfpType:t};jQuery.ajax({type:"POST",url:ajaxurl,data:o,complete:function(e){if(200==e.status){console.log(e);var t=e.responseText;""==t&&(a.find(".post_format_url").val(""),a.find(".post_format_value").val("")),a.find(".pfp-media-holder").html(t)}}})}},{}],5:[function(e,t,a){"use strict";jQuery(document).ready(function(o){o(".js--post-format-status-textarea").on("keyup",function(){var e=o(this),t=e.val().length,a=e.prev(".js--char-count");a.text(t),140<=t?a.css("color","red"):a.css("color","")})})},{}]},{},[1]);